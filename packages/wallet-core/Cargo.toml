[package]
name = "wallet-core"
version = "0.1.0"
edition = "2021"

[lib]
crate-type = ["cdylib", "rlib"]

[dependencies]
wasm-bindgen = "0.2"
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
js-sys = "0.3"
# Explicitly add getrandom 0.2 with js feature to ensure WASM compatibility
# This helps when some transitive dependencies use getrandom 0.2
getrandom = { version = "0.2", features = ["js"] }

# Zcash dependencies - only compiled when "native" feature is enabled
# These are optional and only used for native (non-WASM) builds
# WASM builds will use the stub implementation
zcash_client_backend = { version = "0.10", optional = true }
zcash_client_sqlite = { version = "0.10", optional = true }
zcash_address = { version = "0.2", optional = true }
zcash_primitives = { version = "0.13", optional = true }
rand = { version = "0.8", optional = true }
zip32 = { version = "0.1", optional = true }
hex = { version = "0.4", optional = true }

[features]
default = []
native = ["zcash_client_backend", "zcash_client_sqlite", "zcash_address", "zcash_primitives", "rand", "zip32", "hex"]

# Configure getrandom for WASM - both 0.2 and 0.3 will be handled
# getrandom 0.3 will use wasm-bindgen automatically when available
# For getrandom 0.2, we need to ensure js feature is enabled via dependency features

