(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,43250,e=>{"use strict";let t=(0,e.i(10965).default)("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);e.s(["Key",()=>t],43250)},72809,e=>{"use strict";let t=(0,e.i(10965).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>t],72809)},15278,57276,e=>{"use strict";var t=e.i(10965);let s=(0,t.default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);e.s(["Mail",()=>s],15278);let a=(0,t.default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>a],57276)},10965,e=>{"use strict";var t=e.i(58138);let s=(...e)=>e.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim();var a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let r=(0,t.forwardRef)(({color:e="currentColor",size:r=24,strokeWidth:l=2,absoluteStrokeWidth:d,className:n="",children:c,iconNode:i,...o},x)=>(0,t.createElement)("svg",{ref:x,...a,width:r,height:r,stroke:e,strokeWidth:d?24*Number(l)/Number(r):l,className:s("lucide",n),...o},[...i.map(([e,s])=>(0,t.createElement)(e,s)),...Array.isArray(c)?c:[c]])),l=(e,a)=>{let l=(0,t.forwardRef)(({className:l,...d},n)=>(0,t.createElement)(r,{ref:n,iconNode:a,className:s(`lucide-${e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,l),...d}));return l.displayName=`${e}`,l};e.s(["default",()=>l],10965)},86591,e=>{"use strict";let t=(0,e.i(10965).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],86591)},20084,e=>{"use strict";var t=e.i(29511),s=e.i(58138),a=e.i(28712),r=e.i(10965);let l=(0,r.default)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),d=(0,r.default)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),n=(0,r.default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);var c=e.i(15278),i=e.i(43250),o=e.i(72809);let x=(0,r.default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var m=e.i(86591),h=e.i(57276);let y=(0,r.default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);function p(){let[e,r]=(0,s.useState)(!1),[p,u]=(0,s.useState)(""),[g,j]=(0,s.useState)(""),[f,b]=(0,s.useState)(""),[N,w]=(0,s.useState)([]),[v,k]=(0,s.useState)(!1),[S,C]=(0,s.useState)(null),[z,A]=(0,s.useState)(!1),[$,M]=(0,s.useState)(!1),[T,L]=(0,s.useState)(null);(0,s.useEffect)(()=>{let e=localStorage.getItem("zchat_admin_secret");e&&(u(e),r(!0))},[]),(0,s.useEffect)(()=>{e&&p&&E()},[e,p]);let O=async e=>{e.preventDefault(),b("");try{(await fetch("https://api.zsend.xyz/admin/whitelist",{headers:{"X-Admin-Secret":g}})).ok?(localStorage.setItem("zchat_admin_secret",g),u(g),r(!0)):b("Invalid admin secret")}catch{b("Failed to connect to server")}},E=async()=>{k(!0);try{let e=await fetch("https://api.zsend.xyz/admin/whitelist",{headers:{"X-Admin-Secret":p}}),t=await e.json();t.entries&&w(t.entries)}catch(e){console.error("Failed to load entries:",e)}finally{k(!1)}},B=async e=>{A(!0),L(null);try{let t=await fetch(`https://api.zsend.xyz/admin/whitelist/${e.id}/generate-code`,{method:"POST",headers:{"X-Admin-Secret":p,"Content-Type":"application/json"},body:JSON.stringify({})}),s=await t.json();s.success?(L({type:"success",text:`Code generated: ${s.code}`}),E()):L({type:"error",text:s.error||"Failed to generate code"})}catch{L({type:"error",text:"Failed to generate code"})}finally{A(!1)}},F=async(e,t)=>{M(!0),L(null);try{let s=await fetch(`https://api.zsend.xyz/admin/whitelist/${e.id}/send-code-email`,{method:"POST",headers:{"X-Admin-Secret":p,"Content-Type":"application/json"},body:JSON.stringify({code:t})}),a=await s.json();a.success?L({type:"success",text:`Email sent to ${e.email}`}):L({type:"error",text:a.error||"Failed to send email"})}catch{L({type:"error",text:"Failed to send email"})}finally{M(!1)}},R=async e=>{A(!0),M(!0),L(null);try{let t=await fetch(`https://api.zsend.xyz/admin/whitelist/${e.id}/generate-code`,{method:"POST",headers:{"X-Admin-Secret":p,"Content-Type":"application/json"},body:JSON.stringify({})}),s=await t.json();if(!s.success)return void L({type:"error",text:s.error||"Failed to generate code"});let a=await fetch(`https://api.zsend.xyz/admin/whitelist/${e.id}/send-code-email`,{method:"POST",headers:{"X-Admin-Secret":p,"Content-Type":"application/json"},body:JSON.stringify({code:s.code})}),r=await a.json();r.success?L({type:"success",text:`Code ${s.code} generated and sent to ${e.email}`}):L({type:"error",text:`Code generated (${s.code}) but email failed: ${r.error}`}),E()}catch{L({type:"error",text:"Failed to generate and send code"})}finally{A(!1),M(!1)}};return e?(0,t.jsxs)("main",{className:"min-h-screen bg-[#050510]",children:[(0,t.jsx)("header",{className:"border-b border-cyan-500/20 bg-gray-900/50 backdrop-blur-sm",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(n,{className:"w-6 h-6 text-cyan-400"}),(0,t.jsx)("h1",{className:"text-xl font-bold text-white",children:"ZCHAT Admin"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)(a.Button,{onClick:E,variant:"outline",size:"sm",className:"border-cyan-500/30 text-cyan-400 hover:bg-cyan-500/10",disabled:v,children:[(0,t.jsx)(y,{className:`w-4 h-4 mr-2 ${v?"animate-spin":""}`}),"Refresh"]}),(0,t.jsx)(a.Button,{onClick:()=>{localStorage.removeItem("zchat_admin_secret"),u(""),r(!1),w([])},variant:"outline",size:"sm",className:"border-gray-600 text-gray-400 hover:bg-gray-800",children:"Logout"})]})]})}),T&&(0,t.jsxs)("div",{className:`fixed top-4 right-4 z-50 px-4 py-3 rounded-lg ${"success"===T.type?"bg-green-500/20 border border-green-500/50 text-green-400":"bg-red-500/20 border border-red-500/50 text-red-400"}`,children:[T.text,(0,t.jsx)("button",{onClick:()=>L(null),className:"ml-3 hover:opacity-70",children:"Ã—"})]}),(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[(0,t.jsxs)("div",{className:"rounded-xl border border-cyan-500/20 bg-gray-900/30 p-4",children:[(0,t.jsx)("p",{className:"text-gray-400 text-sm",children:"Total Requests"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-white",children:N.length})]}),(0,t.jsxs)("div",{className:"rounded-xl border border-yellow-500/20 bg-gray-900/30 p-4",children:[(0,t.jsx)("p",{className:"text-gray-400 text-sm",children:"Pending"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-yellow-400",children:N.filter(e=>"pending"===e.status).length})]}),(0,t.jsxs)("div",{className:"rounded-xl border border-green-500/20 bg-gray-900/30 p-4",children:[(0,t.jsx)("p",{className:"text-gray-400 text-sm",children:"Approved"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-green-400",children:N.filter(e=>"approved"===e.status).length})]}),(0,t.jsxs)("div",{className:"rounded-xl border border-cyan-500/20 bg-gray-900/30 p-4",children:[(0,t.jsx)("p",{className:"text-gray-400 text-sm",children:"Downloaded"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-cyan-400",children:N.filter(e=>e.downloadCodes.some(e=>e.used)).length})]})]}),(0,t.jsx)("div",{className:"rounded-xl border border-cyan-500/20 bg-gray-900/30 overflow-hidden",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-cyan-500/20 bg-gray-900/50",children:[(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Email"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Reason"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Status"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Date"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Codes"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Actions"})]})}),(0,t.jsxs)("tbody",{children:[N.map(e=>(0,t.jsxs)("tr",{className:"border-b border-gray-800 hover:bg-gray-900/50",children:[(0,t.jsx)("td",{className:"px-4 py-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(c.Mail,{className:"w-4 h-4 text-gray-500"}),(0,t.jsx)("span",{className:"text-white text-sm",children:e.email})]})}),(0,t.jsx)("td",{className:"px-4 py-4",children:(0,t.jsx)("p",{className:"text-gray-300 text-sm max-w-xs truncate",title:e.reason,children:e.reason})}),(0,t.jsx)("td",{className:"px-4 py-4",children:(0,t.jsxs)("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${(e=>{switch(e){case"approved":return"text-green-400 bg-green-500/10";case"rejected":return"text-red-400 bg-red-500/10";default:return"text-yellow-400 bg-yellow-500/10"}})(e.status)}`,children:["approved"===e.status&&(0,t.jsx)(o.Check,{className:"w-3 h-3"}),"rejected"===e.status&&(0,t.jsx)(x,{className:"w-3 h-3"}),"pending"===e.status&&(0,t.jsx)(m.Clock,{className:"w-3 h-3"}),e.status]})}),(0,t.jsx)("td",{className:"px-4 py-4",children:(0,t.jsx)("span",{className:"text-gray-400 text-sm",children:new Date(e.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})}),(0,t.jsx)("td",{className:"px-4 py-4",children:e.downloadCodes.length>0?(0,t.jsx)("div",{className:"space-y-1",children:e.downloadCodes.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("code",{className:"text-xs font-mono bg-gray-800 px-2 py-1 rounded text-cyan-400",children:e.code}),e.used?(0,t.jsx)("span",{className:"text-xs text-green-400",children:"Used"}):new Date>new Date(e.expiresAt)?(0,t.jsx)("span",{className:"text-xs text-red-400",children:"Expired"}):(0,t.jsx)("span",{className:"text-xs text-yellow-400",children:"Active"})]},e.id))}):(0,t.jsx)("span",{className:"text-gray-500 text-sm",children:"No codes"})}),(0,t.jsx)("td",{className:"px-4 py-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:["pending"===e.status&&(0,t.jsxs)(a.Button,{onClick:()=>R(e),size:"sm",className:"bg-cyan-500 text-black hover:bg-cyan-400 text-xs",disabled:z||$,children:[(0,t.jsx)(h.Send,{className:"w-3 h-3 mr-1"}),"Approve & Send"]}),"approved"===e.status&&e.downloadCodes.length>0&&(0,t.jsxs)(t.Fragment,{children:[!e.downloadCodes.some(e=>e.used)&&(0,t.jsxs)(a.Button,{onClick:()=>F(e,e.downloadCodes[0].code),size:"sm",variant:"outline",className:"border-cyan-500/30 text-cyan-400 hover:bg-cyan-500/10 text-xs",disabled:$,children:[(0,t.jsx)(c.Mail,{className:"w-3 h-3 mr-1"}),"Resend Email"]}),(0,t.jsxs)(a.Button,{onClick:()=>B(e),size:"sm",variant:"outline",className:"border-gray-600 text-gray-400 hover:bg-gray-800 text-xs",disabled:z,children:[(0,t.jsx)(i.Key,{className:"w-3 h-3 mr-1"}),"New Code"]})]})]})})]},e.id)),0===N.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:6,className:"px-4 py-8 text-center text-gray-500",children:"No whitelist entries yet"})})]})]})})})]})]}):(0,t.jsx)("main",{className:"min-h-screen bg-[#050510] flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"w-full max-w-md",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-cyan-500/10 mb-4",children:(0,t.jsx)(l,{className:"w-8 h-8 text-cyan-400"})}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-white",children:"ZCHAT Admin"}),(0,t.jsx)("p",{className:"text-gray-400 mt-2",children:"Enter your admin secret to continue"})]}),(0,t.jsxs)("form",{onSubmit:O,className:"space-y-4",children:[(0,t.jsx)("div",{children:(0,t.jsx)("input",{type:"password",value:g,onChange:e=>j(e.target.value),placeholder:"Admin Secret",className:"w-full rounded-lg border border-cyan-500/30 bg-gray-900/50 px-4 py-3 text-white placeholder-gray-500 focus:border-cyan-500 focus:outline-none focus:ring-1 focus:ring-cyan-500",required:!0})}),f&&(0,t.jsx)("p",{className:"text-sm text-red-400",children:f}),(0,t.jsxs)(a.Button,{type:"submit",className:"w-full bg-cyan-500 text-black hover:bg-cyan-400",children:[(0,t.jsx)(d,{className:"w-4 h-4 mr-2"}),"Login"]})]})]})})}e.s(["default",()=>p],20084)}]);