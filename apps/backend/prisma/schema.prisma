generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id             Int      @id @default(autoincrement())
  username       String   @unique
  createdAt      DateTime @default(now())
  passwordHash   String
  primaryAddress String?
  walletDbPath   String?
}

model Whitelist {
  id            Int            @id @default(autoincrement())
  email         String         @unique
  reason        String
  status        String         @default("pending")
  createdAt     DateTime       @default(now())
  approvedAt    DateTime?
  downloadCodes DownloadCode[]
}

model DownloadCode {
  id          Int       @id @default(autoincrement())
  code        String    @unique
  whitelistId Int
  used        Boolean   @default(false)
  usedAt      DateTime?
  createdAt   DateTime  @default(now())
  expiresAt   DateTime
  whitelist   Whitelist @relation(fields: [whitelistId], references: [id])
}

model ContactSubmission {
  id        Int      @id @default(autoincrement())
  name      String
  email     String
  message   String
  createdAt DateTime @default(now())
  read      Boolean  @default(false)
  readAt    DateTime?
}
